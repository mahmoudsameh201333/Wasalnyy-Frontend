<app-header-bar></app-header-bar>


<div class="container w-100 my-4">
        <div class="d-flex justify-content-between">
                <p class="fw-bold fs-3">Trip history</p>
                <span>
                        filter by:         
                        <select class="form-select" (change)="onFilterChange($event)" class="border-0 border-bottom">
                         <option value="RequestedDate">Requested Date</option>
                         <option value="StartDate">Start Date</option>
                        <option value="EndDate">End Date</option>
                        <option value="Price">Price</option>
                        </select>
                </span>
        </div>
        <div class="container w-100 d-flex gap-3 flex-wrap justify-content-around align-content-center" style="margin: 25px;">
                @for(trip of tripHistoryArr;track trip.id ){
                        <div class="position-relative d-flex flex-column rounded-3 highlight-hover" style="will-change:transform, box-shadow; width: 400px;box-shadow: 2px 2px 10px grey; transition: all 0.2s ease;">
                        <div class="w-100 d-flex justify-content-between mx-auto position-absolute z-2">
                                 <p class="fw-bold p-2 bg-primary text-white">{{trip.requestedDate|date:"medium"}}</p>
                                 @if(trip.tripStatus==="Ended"){
                                   <p class="fw-bold text-white bg-success p-2">{{trip.tripStatus}}</p>     
                                 } @else{
                                        <p class="fw-bold text-white bg-dark p-2">{{trip.tripStatus}}</p>
                                 }
                                 
                        </div>
                        <app-map style="height: 400px;pointer-events: none;z-index: 1;" [firstPoint]="trip.pickupCoordinates" [secondPoint]="trip.destinationCoordinates" ></app-map>
                        <div class="text-center p-2" style="height: 210px;">
                                <p class="fw-bold m-2">{{trip.pickUpName}}</p>
                                <p>to</p>
                                <p class="fw-bold m-2">{{trip.destinationName}}</p>
                                <div class="d-flex justify-content-between w-100">
                                        <p class="fw-bold m-2"> {{trip.price|currency:'USD'}}, {{trip.paymentMethod}}</p>
                                        <button class="btn btn-danger w-50 text-white fw-bold" style="pointer-events: all;">report a problem</button>
                                </div>
                        </div>
                </div>
                }
        </div>

<div class="d-flex justify-content-center">
        <button (click)="getPreviousPage()" [disabled]="this.firstPage" class="btn btn-light"><img src="caret-left-fill.svg" alt=""></button>
        <button (click)="getNextPage()" [disabled]="this.lastPage" class="btn btn-light"><img src="caret-right-fill.svg" alt=""></button>
</div>
</div>